"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react-dom"),t=require("react"),i=require("@emotion/styled/base"),r=require("@mui/material/Stack"),s=require("@mui/material/Alert"),o=require("@emotion/react"),n=require("@mui/material");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=a(i),u=a(r),l=a(s);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},g.apply(this,arguments)}const m=t.createContext();m.Consumer,m.Provider;const d=e=>{const{message:i,options:r={},id:s,isEntered:n,notifyItemProps:a}=e,{defaultSeverity:c,TransitionComponent:u,TransitionProps:m,AlertProps:d,generalTimeOut:I,remove:p,customAlert:C}=a,{timeOut:b=I,isPersist:A}=r,[X,f]=t.useState(!0),G=function(){const e=t.useRef(!1);return t.useEffect((()=>(e.current=!0,()=>{e.current=!1})),[]),t.useCallback((()=>e.current),[])}();let y=t.useRef(null);t.useEffect((()=>(clearTimeout(y.current),y.current=setTimeout((()=>{G&&!A&&f(!1)}),b),()=>clearTimeout(y.current))),[b,A,G]),t.useEffect((()=>{n||f(!1)}),[n,s]);return o.jsx(u,g({in:X,mountOnEnter:!0,unmountOnExit:!0,onExited:()=>{!X&&p&&p(s)}},m),C?o.jsx("div",{className:"Custom-Alert"},C(e)):o.jsx(l.default,g({id:s,severity:r&&r.variant||c},d),i+s))};var I=t.memo(d);const p=c.default("div","production"===process.env.NODE_ENV?{target:"e3eaemj0"}:{target:"e3eaemj0",label:"NotifyWrapperStyled"})("position:fixed;z-index:100000;height:auto;max-width:50%;",(({position:e})=>e.split("-").map((e=>`${e}: 10px`))),";"+("production"===process.env.NODE_ENV?"":"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeVdyYXBwZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSXNDIiwiZmlsZSI6Im5vdGlmeVdyYXBwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVkIGZyb20gXCJAZW1vdGlvbi9zdHlsZWRcIjtcbmltcG9ydCBTdGFjayBmcm9tIFwiQG11aS9tYXRlcmlhbC9TdGFja1wiO1xuaW1wb3J0IE5vdGlmeUl0ZW0gZnJvbSBcIi4vbm90aWZ5SXRlbVwiO1xuXG5jb25zdCBOb3RpZnlXcmFwcGVyU3R5bGVkID0gc3R5bGVkLmRpdmBcbiAgcG9zaXRpb246IGZpeGVkO1xuICB6LWluZGV4OiAxMDAwMDA7XG4gIGhlaWdodDogYXV0bztcbiAgbWF4LXdpZHRoOiA1MCU7XG5cbiAgJHsoeyBwb3NpdGlvbiB9KSA9PlxuICAgIHBvc2l0aW9uLnNwbGl0KFwiLVwiKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgIHJldHVybiBgJHtpdGVtfTogMTBweGA7XG4gICAgfSl9XG5gO1xuXG5jb25zdCBOb3RpZnlXcmFwcGVyID0gKHsgbm90aWZ5TGlzdCwgcmVtb3ZlLCAuLi5yZXN0UHJvcHMgfSkgPT4ge1xuICBjb25zdCB7XG4gICAgcG9zaXRpb24sXG4gICAgZGVmYXVsdFNldmVyaXR5LFxuICAgIGdlbmVyYWxUaW1lT3V0LFxuICAgIFRyYW5zaXRpb25Db21wb25lbnQsXG4gICAgVHJhbnNpdGlvblByb3BzLFxuICAgIEFsZXJ0UHJvcHMsXG4gICAgU3RhY2tQcm9wcyxcbiAgICBjdXN0b21BbGVydCxcbiAgfSA9IHJlc3RQcm9wcztcblxuICBjb25zdCBub3RpZnlJdGVtUHJvcHMgPSB7XG4gICAgZGVmYXVsdFNldmVyaXR5LFxuICAgIFRyYW5zaXRpb25Db21wb25lbnQsXG4gICAgVHJhbnNpdGlvblByb3BzLFxuICAgIEFsZXJ0UHJvcHMsXG4gICAgZ2VuZXJhbFRpbWVPdXQsXG4gICAgcmVtb3ZlLFxuICAgIGN1c3RvbUFsZXJ0LFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPE5vdGlmeVdyYXBwZXJTdHlsZWQgcG9zaXRpb249e3Bvc2l0aW9ufT5cbiAgICAgIDxTdGFjayBzcGFjaW5nPXsyfSB7Li4uU3RhY2tQcm9wc30+XG4gICAgICAgIHtub3RpZnlMaXN0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Tm90aWZ5SXRlbVxuICAgICAgICAgICAgICBrZXk9e2l0ZW0uaWR9XG4gICAgICAgICAgICAgIG5vdGlmeUl0ZW1Qcm9wcz17bm90aWZ5SXRlbVByb3BzfVxuICAgICAgICAgICAgICB7Li4uaXRlbX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L1N0YWNrPlxuICAgIDwvTm90aWZ5V3JhcHBlclN0eWxlZD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5vdGlmeVdyYXBwZXI7XG4iXX0= */")),C=({notifyList:e,remove:t,...i})=>{const{position:r,defaultSeverity:s,generalTimeOut:n,TransitionComponent:a,TransitionProps:c,AlertProps:l,StackProps:m,customAlert:d}=i,C={defaultSeverity:s,TransitionComponent:a,TransitionProps:c,AlertProps:l,generalTimeOut:n,remove:t,customAlert:d};return o.jsx(p,{position:r},o.jsx(u.default,g({spacing:2},m),e.map((e=>o.jsx(I,g({key:e.id,notifyItemProps:C},e))))))};class b extends React.PureComponent{constructor(e){super(e);const{wrapperElement:t,wrapperName:i}=this.props,r=document.createElement(t||"div");r.className=i||"rezvani-notify-wrapper",document.body.appendChild(r),this.renderPortal=r,this.actionQueue=[],this.isStateBlocked=!1,this.state={notifyList:[]}}getList=()=>[...this.state.notifyList];commitState=(e,t)=>{this.isStateBlocked=t,this.setState({notifyList:e},(()=>{t||this.proccessQueue()}))};proccessQueue=()=>{const e=this.actionQueue.shift();e&&e()};notifier=(e,t)=>{const{maxNotif:i,preventDuplicate:r}=this.props,s=Math.random().toString(16).slice(2),o={message:e,options:t,isEntered:!0,id:s},n=this.getList();if(!(n.findIndex((t=>t.message===e))>=0&&r)){if(!this.isStateBlocked)return n.length>=i?(n[0].isEntered=!1,n.push(o),this.commitState(n,!0)):(n.push(o),this.commitState(n,!1)),s;this.actionQueue.push((()=>this.notifier(e,t)))}};removeNofityById=e=>{const t=[...this.state.notifyList].filter((t=>t.id!==e));this.commitState(t,!1)};removeNotifierAnimationById=e=>{const t=this.getList(),i=t.findIndex((t=>t.id===e));i>=0&&(t[i].isEntered=!1),this.commitState(t,!1)};render(){const{notifyList:t}=this.state,{children:i,...r}=this.props;return o.jsx(m.Provider,{value:{notifier:this.notifier,removeNotifier:this.removeNotifierAnimationById}},i,e.createPortal(o.jsx(C,g({notifyList:t,remove:this.removeNofityById},r)),this.renderPortal))}}b.defaultProps={customAlert:null,preventDuplicate:!1,position:"bottom-left",wrapperElement:"div",wrapperName:"rezvani-notify-wrapper",maxNotif:3,defaultSeverity:"info",generalTimeOut:3e3,TransitionComponent:n.Slide,TransitionProps:{},AlertProps:{},StackProps:{spacing:1,direction:"column-reverse"}};exports.MuiNotifyProvider=b,exports.useNotifier=()=>t.useContext(m),exports.withNotifier=e=>{class t extends React.PureComponent{render(){return o.jsx(m.Consumer,null,(t=>o.jsx(e,g({},this.props,t))))}}return t};
